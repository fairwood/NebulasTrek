require=function c(a,r,s){function l(e,t){if(!r[e]){if(!a[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(d)return d(e,!0);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var i=r[e]={exports:{}};a[e][0].call(i.exports,function(t){return l(a[e][1][t]||t)},i,i.exports,c,a,r,s)}return r[e].exports}for(var d="function"==typeof require&&require,t=0;t<s.length;t++)l(s[t]);return l}({BaseUI:[function(t,e,n){"use strict";cc._RF.push(e,"3b934a4EjZFs6JzaRDhWpVf","BaseUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,c=(o.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e=__decorate([i],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],CvsMain:[function(t,e,n){"use strict";cc._RF.push(e,"69237yn4edJBK/5XvDAGlzX","CvsMain"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,c=o.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uiContainer=null,t}return __extends(t,e),(n=t).prototype.onLoad=function(){n.Instance=this},t.EnterUI=function(e){this.Instance.uiContainer.children.forEach(function(t){t.getComponent(e)?t.active=!0:t.active=!1})},__decorate([c(cc.Node)],t.prototype,"uiContainer",void 0),t=n=__decorate([i],t);var n}(cc.Component);n.default=a,cc._RF.pop()},{}],DialogPanel:[function(t,e,n){"use strict";cc._RF.push(e,"c0958fmSyFAp6wyHbHS0e10","DialogPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,c=o.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lblTitle=null,t.lblContext=null,t.btn0=null,t.lblBtn0=null,t.btn1=null,t.lblBtn1=null,t}return __extends(t,e),(n=t).prototype.onLoad=function(){(n.Instance=this).hide()},t.PopupWith1Button=function(t,e,n,o){this.Instance.show(),this.Instance.lblTitle.string=t,this.Instance.lblContext.string=e,this.Instance.func0=o,this.Instance.lblBtn0.string=n,this.Instance.btn0.active=!0,this.Instance.btn0.position=new cc.Vec2(0,0),this.Instance.btn1.active=!1},t.PopupWith2Buttons=function(t,e,n,o,i,c){this.Instance.show(),this.Instance.lblTitle.string=t,this.Instance.lblContext.string=e,this.Instance.func0=o,this.Instance.lblBtn0.string=n,this.Instance.btn0.active=!0,this.Instance.btn0.position=new cc.Vec2(-150,0),this.Instance.func1=o,this.Instance.lblBtn1.string=n,this.Instance.btn1.active=!0,this.Instance.btn1.position=new cc.Vec2(150,0)},t.prototype.onBtn0Click=function(){this.func0&&this.func0()},t.prototype.onBtn1Click=function(){this.func1&&this.func1()},t.prototype.show=function(){this.node.active=!0},t.prototype.hide=function(){this.node.active=!1},__decorate([c(cc.Label)],t.prototype,"lblTitle",void 0),__decorate([c(cc.Label)],t.prototype,"lblContext",void 0),__decorate([c(cc.Node)],t.prototype,"btn0",void 0),__decorate([c(cc.Label)],t.prototype,"lblBtn0",void 0),__decorate([c(cc.Node)],t.prototype,"btn1",void 0),__decorate([c(cc.Label)],t.prototype,"lblBtn1",void 0),t=n=__decorate([i],t);var n}(cc.Component);n.default=a,cc._RF.pop()},{}],HomeUI:[function(t,e,n){"use strict";cc._RF.push(e,"458fd6d6ChEGo+U+drv+haG","HomeUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./BaseUI"),i=t("./MainCtrl"),c=cc._decorator,a=c.ccclass,r=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),(n=e).prototype.onLoad=function(){n.Instance=this},e.prototype.onMode0BtnClick=function(){i.default.Instance.gotoMode0()},e.prototype.onMode1BtnClick=function(){i.default.Instance.gotoMode1()},e=n=__decorate([a],e);var n}(o.default));n.default=r,cc._RF.pop()},{"./BaseUI":"BaseUI","./MainCtrl":"MainCtrl"}],MainCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"162b9/mIe1LjqpHBpjQnzp+","MainCtrl"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./CvsMain"),i=t("./HomeUI"),c=t("./Mode0UI"),a=t("./Mode1UI"),r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.energy=0,t}return __extends(t,e),(n=t).prototype.onLoad=function(){n.Instance=this},t.prototype.start=function(){o.default.EnterUI(i.default)},t.prototype.gotoHome=function(){o.default.EnterUI(i.default)},t.prototype.gotoMode0=function(){o.default.EnterUI(c.default)},t.prototype.gotoMode1=function(){o.default.EnterUI(a.default)},t=n=__decorate([s],t);var n}(cc.Component));n.default=l,cc._RF.pop()},{"./CvsMain":"CvsMain","./HomeUI":"HomeUI","./Mode0UI":"Mode0UI","./Mode1UI":"Mode1UI"}],Mode0UI:[function(t,e,n){"use strict";cc._RF.push(e,"d2d4ehqPFVDS4fv9l1Oq7He","Mode0UI"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./BaseUI"),i=t("./Particle"),c=t("./MainCtrl"),a=cc._decorator,r=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lblEnergy=null,t.btnPause=null,t.btnResume=null,t.btnPack=null,t.ingameRange=null,t.fallingParticles=null,t.attachedParticles=null,t.touchPad=null,t.handle=null,t.amTemplate=null,t.pmTemplate=null,t.probabilityPerSecond=1,t.pause=!1,t.explode=!1,t}return __extends(t,e),(n=t).prototype.onLoad=function(){n.Instance=this},t.prototype.start=function(){this.touchPad.on(cc.Node.EventType.TOUCH_MOVE,function(t){this.moveHandle(t.getDelta())},this)},t.prototype.onEnable=function(){cc.director.getPhysicsManager().enabled=!0;var t=cc.director.getCollisionManager();t.enabled=!0,t.enabledDebugDraw=!0,t.enabledDrawBoundingBox=!0,this.restart()},t.prototype.moveHandle=function(t){var e=this.handle.position.x,n=this.handle.position.x+t.x;n<-this.ingameRange.width/2&&(n=-this.ingameRange.width/2),n>this.ingameRange.width/2&&(n=this.ingameRange.width/2);var o=n-e;this.attachedParticles.children.forEach(function(t){var e=t.getComponent(cc.RigidBody);e.node.position=new cc.Vec2(e.node.position.x+o,e.node.position.y)}),this.handle.position=new cc.Vec2(n,this.handle.position.y)},t.prototype.restart=function(){console.log("restart"),this.handle.position=new cc.Vec2(0,this.handle.position.y);var t=cc.instantiate(this.amTemplate);t.parent=this.attachedParticles,t.position=this.handle.position;var e=t.getComponent(i.default);e.isHandle=!0,e.state=1,e.fatherParticle=this.handle,e.relPosition=cc.Vec2.ZERO,t.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static,this.pause=!1,this.explode=!1,t.active=!0},t.prototype.update=function(t){var e=this.attachedParticles.childrenCount;if(this.lblEnergy.string=(e*e).toFixed(),this.explode)return this.fallingParticles.children.forEach(function(t){t.destroy()}),this.attachedParticles.children.forEach(function(t){t.destroy()}),void this.restart();if(this.pause?(this.btnPause.node.active=!1,this.btnResume.node.active=!0,this.btnPack.node.active=!0):(this.btnPause.node.active=!0,this.btnResume.node.active=!1,this.btnPack.node.active=!1),!this.pause){var n=Math.random();if(n<this.probabilityPerSecond*t){var o=cc.instantiate(this.amTemplate),i=-this.ingameRange.width/2+Math.random()*this.ingameRange.width;o.parent=this.fallingParticles,o.position=new cc.Vec2(i,this.node.height/2+50),o.getComponent(cc.RigidBody).linearVelocity=new cc.Vec2(0,-400),o.active=!0}if((n=Math.random())<this.probabilityPerSecond*t){o=cc.instantiate(this.pmTemplate),i=-this.ingameRange.width/2+Math.random()*this.ingameRange.width;o.parent=this.fallingParticles,o.position=new cc.Vec2(i,this.node.height/2+50),o.getComponent(cc.RigidBody).linearVelocity=new cc.Vec2(0,-400),o.active=!0}}},t.prototype.contactParticle=function(t,e){var n=t.node;if(t.isPositiveParticle){var o=20*Math.sqrt(this.attachedParticles.childrenCount);console.log("毁灭",o),this.explode=!0}else{n.getComponent(cc.RigidBody).linearVelocity=cc.Vec2.ZERO,t.fatherParticle=e,t.relPosition=t.node.position.sub(this.handle.position),t.node.parent=this.attachedParticles}},t.prototype.onPauseClick=function(){this.pause=!0},t.prototype.onResumeClick=function(){this.pause=!1},t.prototype.onPackClick=function(){console.log("装瓶");var t=this.attachedParticles.childrenCount;c.default.Instance.energy=t*t,c.default.Instance.gotoHome()},t.prototype.onDisable=function(){cc.director.getPhysicsManager().enabled=!1;var t=cc.director.getCollisionManager();t.enabled=!1,t.enabledDebugDraw=!1,this.fallingParticles.children.forEach(function(t){t.destroy()}),this.attachedParticles.children.forEach(function(t){t.destroy()})},__decorate([s(cc.Label)],t.prototype,"lblEnergy",void 0),__decorate([s(cc.Button)],t.prototype,"btnPause",void 0),__decorate([s(cc.Button)],t.prototype,"btnResume",void 0),__decorate([s(cc.Button)],t.prototype,"btnPack",void 0),__decorate([s(cc.Node)],t.prototype,"ingameRange",void 0),__decorate([s(cc.Node)],t.prototype,"fallingParticles",void 0),__decorate([s(cc.Node)],t.prototype,"attachedParticles",void 0),__decorate([s(cc.Node)],t.prototype,"touchPad",void 0),__decorate([s(cc.Node)],t.prototype,"handle",void 0),__decorate([s(cc.Node)],t.prototype,"amTemplate",void 0),__decorate([s(cc.Node)],t.prototype,"pmTemplate",void 0),t=n=__decorate([r],t);var n}(o.default);n.default=l,cc._RF.pop()},{"./BaseUI":"BaseUI","./MainCtrl":"MainCtrl","./Particle":"Particle"}],Mode1UI:[function(t,e,n){"use strict";cc._RF.push(e,"e7f42dM68VAz487nLcu3wTI","Mode1UI"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./BaseUI"),i=cc._decorator,c=i.ccclass,a=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),(n=e).prototype.onLoad=function(){n.Instance=this},e.prototype.onMode0BtnClick=function(){},e.prototype.onMode1BtnClick=function(){},e=n=__decorate([c],e);var n}(o.default));n.default=a,cc._RF.pop()},{"./BaseUI":"BaseUI"}],Particle:[function(t,e,n){"use strict";cc._RF.push(e,"7be7c6f0w1L2oeo4NnKvSKM","Particle"),Object.defineProperty(n,"__esModule",{value:!0});var c=t("./Mode0UI"),o=cc._decorator,a=o.ccclass,r=o.property,i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isPositiveParticle=!1,t.isHandle=!1,t.state=0,t.fatherParticle=null,t.relPosition=null,t.exploded=!1,t.decayCountdown=null,t}return __extends(t,e),(i=t).prototype.update=function(t){switch(this.state){case 0:if(this.fatherParticle){var e=this.getComponent(cc.RigidBody);e.type=cc.RigidBodyType.Static,e.linearVelocity=cc.Vec2.ZERO,this.node.position=c.default.Instance.handle.position.add(this.relPosition),e.enabledContactListener=!1,this.state=1}else this.node.position.y<-1200&&this.node.destroy();break;case 1:this.node.position=c.default.Instance.handle.position.add(this.relPosition)}},t.prototype.onBeginContact=function(t,e,n){if(0==this.state&&!this.fatherParticle){var o=n.getComponent(i);o&&1==o.state&&c.default.Instance.contactParticle(this,o)}},__decorate([r(cc.Boolean)],t.prototype,"isPositiveParticle",void 0),t=i=__decorate([a],t);var i}(cc.Component);n.default=i,cc._RF.pop()},{"./Mode0UI":"Mode0UI"}]},{},["BaseUI","CvsMain","DialogPanel","HomeUI","MainCtrl","Mode0UI","Mode1UI","Particle"]);